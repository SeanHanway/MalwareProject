from Encryption import Encryption
import os

if __name__ == "__main__":
    encrypt = Encryption()
    target_dir = "C:/RansomwareTestFolder"
    test_file = "testfile.txt"
    test_message = "This text is unencrypted and should be readable."

    try:
        os.mkdir(target_dir)
    except FileExistsError:
        print("Directory C:/RansomwareTestFolder already exists...\nContinuing...")

    try:
        with open(target_dir + '/' +  test_file, 'w') as testfile:
            testfile.write(test_message)
    except FileNotFoundError:
        print("Error creating test file in " + target_dir + "..."
              "\nExiting with error code (1)...")
        quit()

    encrypt.encrypt_folder_contents(target_dir)

    print("Test folder created at " + target_dir + " and contents of test file '" + test_file + "' encrypted "
                                                                                                "successfully")
